<!doctype html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<title>Python 标准库：re - Gra55&#39;s Blog</title>
<meta name="viewport" content="width=device-width, initial-scale=1">


  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png?v=1">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png?v=1">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png?v=1">
  <link rel="manifest" href="/favicon/site.webmanifest?v=1">
  
    <link rel="mask-icon" href="/favicon/safari-pinned-tab.svg?v=1" color="#ffffff">
    <link rel="shortcut icon" href="/favicon/favicon.ico?v=1">
    <meta name="msapplication-config" content="/favicon/browserconfig.xml?v=1">
  
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="theme-color" content="#ffffff">

<meta name="generator" content="Hugo 0.60.0" /><meta property="og:site_name" content="Gra55&#39;s Blog">
  <meta property="og:title" content="Python 标准库：re">
  <meta property="og:description" content="Python 标准库 re（正则表达式）的用法总结">
  <meta property="description" content="Python 标准库 re（正则表达式）的用法总结">
  <meta property="og:url" content="/blog/2019/python/python-standard-library-re/">
  <meta property="og:type" content="article">
  
    
      <meta property="og:image" content="/img/2019/12/beethoven.jpg">
      <meta property="og:image:alt" content="December 22 1808, Beethoven’s iconic FIFTH SYMPHONY Premieres in VIENNA">
    
  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/styles/monokai-sublime.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,800,900|Source+Sans+Pro:400,700">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css">
        <script src="https://kit.fontawesome.com/be54eb011a.js" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="/css/main.min.db5f7c24b564197df6497d519025664c4ebe7e6cb278e17de62b2edae43af3b4.css" integrity="sha256-2198JLVkGX32SX1RkCVmTE6&#43;fmyyeOF95isu2uQ687Q="><link rel="stylesheet" href="/css/add-on.css">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8966627721202055"
  crossorigin="anonymous"></script>
</head>

  <body>
    

<header id="site-header">
  <nav id="site-nav">
    <h1 class="nav-title">
      <a href="/" class="nav">
        
          Blog
        
      </a>
    </h1>
    <menu id="site-nav-menu" class="flyout-menu menu">
      
        
          
          <a href="/" class="nav link"><i class='fa fa-home'></i> Home</a>
        
      
        
          
          <a href="/blog/" class="nav link"><i class='fa fa-coffee'></i> Blog</a>
        
      
        
          
          <a href="/awesome/" class="nav link"><i class='fab fa-angellist'></i> Awesome</a>
        
      
        
          
          <a href="/categories/" class="nav link"><i class='fas fa-folder-open'></i> Categories</a>
        
      
        
          
          <a href="/about/" class="nav link"><i class='fa fa-heartbeat'></i> About</a>
        
      
      
      <a href="#search-input" class="nav link search-toggle"><i class="fas fa-search">&nbsp;</i>Search</a>
    </menu>
    <a href="#search-input" class="nav search-toggle"><i class="fas fa-search fa-2x">&nbsp;</i></a>
    
    <a href="#lang-menu" class="nav lang-toggle" lang="en">en</a>
    <a href="#site-nav" class="nav nav-toggle"><i class="fas fa-bars fa-2x"></i></a>
  </nav>
  <menu id="search" class="menu"><input id="search-input" class="search-input menu"></input><div id="search-results" class="search-results menu"></div></menu>
  <menu id="lang-menu" class="flyout-menu menu">
  <a href="#" lang="en" class="nav link active">English (en)</a>
  
    
      
    
  
</menu>

  
</header>

    <div id="wrapper">
      <section id="site-intro" >
  <a href="/"><img src="/img/main/mamba.png" class="circle" width="100" alt="Mamba spirit" /></a>
  <header>
    <h1>Gra55</h1>
  </header>
  <main>
    <p>愿背井离乡、追寻梦想的你归来仍是少年 <i class='fab fa-angellist'></i></p>
  </main>
  
    <footer>
      <ul class="socnet-icons">
        

        <li><a href="//github.com/LoveXiaoLiu" target="_blank" rel="noopener" title="GitHub" class="fab fa-github"></a></li>























<li><a href="weixin://contacts/profile/0x00" target="_blank" rel="noopener" title="WeChat" class="fab fa-weixin"></a></li>















<li><a href="mailto:shuai.grass@gmail.com" target="_blank" title="Email" class="far fa-envelope"></a></li>

      </ul>
    </footer>
  
</section>

      <main id="site-main">
        
  <article>
    <div class="post">
      <header>
  <div class="title">
    
      <h2><a href="/blog/2019/python/python-standard-library-re/">Python 标准库：re</a></h2>
    
    
      <p>Python 标准库 re（正则表达式）的用法总结</p>
    
  </div>
  <div class="meta">
    <time datetime="2019-12-22 00:00:00 &#43;0000 UTC">December 22, 2019</time>
    <p>gra55</p>
    <p>4-Minute Read</p>
  </div>
</header>

      <div id="socnet-share">
        





      </div>
      <div class="content">
        <a href="/blog/2019/python/python-standard-library-re/" class="image" style="--bg-image: url('/img/2019/12/beethoven.jpg');">
    <img class="stretchH" src="/img/2019/12/beethoven.jpg" alt="December 22 1808, Beethoven’s iconic FIFTH SYMPHONY Premieres in VIENNA">
  </a>
        <blockquote>
<p>NOTE：</p>
<ul>
<li>正则表达式的 pattern 和被匹配的字符串可以是 Unicode 和 8-bit 字符串</li>
<li>正则表示式使用反斜杠（\）来表示特殊的集合，要匹配反斜杠需要使用双反斜杠（\）来表示。Python 中的字符串恰好也使用反斜杠（\）来表示特殊字符或集合，所以要是用 Python 字符串来表示正则表达式中的反斜杠需要使用 4 个反斜杠（\\）。有一个简单的方法，就是使用 Python 的 raw string（字符串前加前缀 r），raw string 内的字符串不进行任何转译。</li>
</ul>
</blockquote>
<h1 id="0x00-">0x00 正则表达式语法</h1>
<p>这个知识点很复杂，需要单独来讨论，先给个参考链接：<a href="https://docs.python.org/2/library/re.html#regular-expression-syntax">Regular Expression Syntax</a></p>
<h1 id="0x01-">0x01 模块内容</h1>
<blockquote>
<p>这里主要讲 re 模块内的函数使用</p>
</blockquote>
<p><strong>re.compile(pattern, flags=0)</strong></p>
<ul>
<li>将正则表达式的 pattern 编译成 _sre.SRE_Pattern 对象。</li>
<li>通过指定 flag 的值可以改变正则表达式匹配的行为，flag 的值可以通过 <code>|</code> 操作符组合多个值。</li>
<li>re.compile() 返回的对象可以多次使用，不需要使用时再次编译，提高效率。但是，如何一个程序中只使用很少的几个正则表达式，那就不需要担心编译的问题了，因为  re.match()、re.search()、re.compile() 等都会将编译后的对象进行缓存（使用的正则表达式多了就不行了，因为毕竟缓存是有限的）。</li>
</ul>
<p><strong>re.DEBUG</strong></p>
<ul>
<li>显示被编译的表达式的 debug 信息</li>
</ul>
<p><strong>re.I &amp;&amp; re.IGNORECASE</strong></p>
<ul>
<li>re.I 是 re.IGNORECASE 的缩写。</li>
<li>进行匹配的时候忽略大小写，如果需要对 Unicode 类型的字符使用这个效果，可以添加 re.UNICODE 标识</li>
</ul>
<p><strong>re.L &amp;&amp; re.LOCALE</strong></p>
<ul>
<li>使正则表达式中的 \w、\W、\b、\B、\s、\S 依赖于当前所在的区域。</li>
</ul>
<p><strong>re.M &amp;&amp; re.MULTILINE</strong></p>
<ul>
<li>指定正则匹配时进行多行匹配：<code>^</code> 字符匹配字符串和**每一行开始（也就是换行符之后）<strong>的位置（默认情况下，<code>^</code> 只匹配字符串开始的位置），<code>$</code> 字符匹配字符串和</strong>每一行结尾（也就是换行符之前）**的位置（默认情况下，<code>$</code> 只匹配字符串结尾，如果结尾是换行符就匹配到换行符之前的位置）</li>
</ul>
<p><strong>re.S &amp;&amp; re.DOTALL</strong></p>
<ul>
<li>这个标识使正则表达式中的 <code>.</code> 字符可以匹配任何字符（包括换行符，默认不匹配换行符）</li>
</ul>
<p><strong>re.U &amp;&amp; re.UNICODE</strong></p>
<ul>
<li>使 \w、\W、\b、\B、\d、\D、\s、\S 依赖于 Unicode 字符集，可以为 re.IGNORECASE 开启 non-ASCII 的匹配</li>
</ul>
<p><strong>re.X &amp;&amp; re.VERBOSE</strong></p>
<ul>
<li>这个标识允许你给正则表达式的 pattern 添加注释，注释使用 <code>#</code> 关键字，从最左边的 <code>#</code> 字符开始到行尾都是注释（前提是 <code>#</code> 不在 character class 中，或者前边没有转义反斜杠）。pattern 中的空白字符是被忽略的，除非在 character class 中，或者前边是一个非转义的反斜杠，或者在 <code>*?</code>、<code>(?:</code>、<code>(?P&lt;...&gt;</code> 中。</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># 这两个正则表达式等价</span>
a <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>compile(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;&#34;&#34;</span><span style="color:#e6db74">\</span><span style="color:#e6db74">d +  # the integral part</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">                   </span><span style="color:#e6db74">\</span><span style="color:#e6db74">.    # the decimal point</span><span style="color:#e6db74">
</span><span style="color:#e6db74"></span><span style="color:#e6db74">                   </span><span style="color:#e6db74">\</span><span style="color:#e6db74">d *  # some fractional digits</span><span style="color:#e6db74">&#34;&#34;&#34;</span>, re<span style="color:#f92672">.</span>X)
b <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>compile(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">\</span><span style="color:#e6db74">d+</span><span style="color:#e6db74">\</span><span style="color:#e6db74">.</span><span style="color:#e6db74">\</span><span style="color:#e6db74">d*</span><span style="color:#e6db74">&#34;</span>)
</code></pre></div><p><strong>re.search(pattern, string, flags=0)</strong></p>
<ul>
<li>扫描字符串（string），寻找第一个正则表达式匹配到的位置，返回一个 MatchObject 对象。如果在字符串中没有位置匹配，就返回 None。注意，this is different from finding a zero-length match at some point in the string（没太明白这句话什么意思）</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">a<span style="color:#f92672">=</span>re<span style="color:#f92672">.</span>search(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">a?bb</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">bbcc</span><span style="color:#e6db74">&#34;</span>)
a<span style="color:#f92672">.</span>group()
<span style="color:#75715e"># &#39;bb&#39;</span>
a<span style="color:#f92672">=</span>re<span style="color:#f92672">.</span>search(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">a?bb</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">bccabbcbb</span><span style="color:#e6db74">&#34;</span>)
a<span style="color:#f92672">.</span>group()
<span style="color:#75715e"># &#39;abb&#39;</span>
</code></pre></div><p><strong>re.match(pattern, string, flags=0)</strong></p>
<ul>
<li>其他的内容与 re.search 相同，不同的是， re.match 必须从字符串的开头开始匹配（re.search 可以从中间才开始匹配正则表达式）。</li>
<li>还有一点需要注意的是，即使在 re.MULTILINE 模式下，re.match 也只能在字符串的开头匹配（而不是每行的开头）</li>
</ul>
<p><strong>re.split(pattern, string, maxsplit=0, flags=0)</strong></p>
<ul>
<li>从 pattern 匹配到的位置来分割字符串。</li>
<li>如果发现在 pattern 中有圆括号，会同时将所有的 groups 添加到列表中返回。</li>
<li>如果 maxsplit 非 0，则匹配到第 maxsplit 个就停止，将剩余的字符串追加到列表后面，然后返回。</li>
<li>如果在字符串的开始捕获到正则表达式中的组（groups，圆括号中的内容），则返回的列表第一个元素是空字符串，对于字符串的末尾也是一样的。</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">re<span style="color:#f92672">.</span>split(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">\</span><span style="color:#e6db74">W+</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Words, words, words.</span><span style="color:#e6db74">&#39;</span>)
<span style="color:#75715e"># [&#39;Words&#39;, &#39;words&#39;, &#39;words&#39;, &#39;&#39;]</span>
re<span style="color:#f92672">.</span>split(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">(</span><span style="color:#e6db74">\</span><span style="color:#e6db74">W+)</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Words, words, words.</span><span style="color:#e6db74">&#39;</span>)
<span style="color:#75715e"># [&#39;Words&#39;, &#39;, &#39;, &#39;words&#39;, &#39;, &#39;, &#39;words&#39;, &#39;.&#39;, &#39;&#39;]</span>
re<span style="color:#f92672">.</span>split(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">\</span><span style="color:#e6db74">W+</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Words, words, words.</span><span style="color:#e6db74">&#39;</span>, <span style="color:#ae81ff">1</span>)
<span style="color:#75715e"># [&#39;Words&#39;, &#39;words, words.&#39;]</span>
re<span style="color:#f92672">.</span>split(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">[a-f]+</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">0a3B9</span><span style="color:#e6db74">&#39;</span>, flags<span style="color:#f92672">=</span>re<span style="color:#f92672">.</span>IGNORECASE)
<span style="color:#75715e"># [&#39;0&#39;, &#39;3&#39;, &#39;9&#39;]</span>
re<span style="color:#f92672">.</span>split(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">(</span><span style="color:#e6db74">\</span><span style="color:#e6db74">W+)</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">...words, words...</span><span style="color:#e6db74">&#39;</span>)
<span style="color:#75715e"># [&#39;&#39;, &#39;...&#39;, &#39;words&#39;, &#39;, &#39;, &#39;words&#39;, &#39;...&#39;, &#39;&#39;]</span>
</code></pre></div><p><strong>re.findall(pattern, string, flags=0)</strong></p>
<ul>
<li>以列表的形式，返回所有不重叠的匹配。从左到右扫描字符串，匹配到的字符串按先后顺序返回。</li>
<li>注意，如果 pattern 中包含组（groups，圆括号中的内容），则返回组列表；如果有多个组，则返回的列表的每一项都是一个元组</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">a?bc</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">bcddabcessbbc</span><span style="color:#e6db74">&#34;</span>)
<span style="color:#75715e"># [&#39;bc&#39;, &#39;abc&#39;, &#39;bc&#39;]</span>
re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">a?(bc)</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">bcddabcessbbc</span><span style="color:#e6db74">&#34;</span>)
<span style="color:#75715e"># [&#39;bc&#39;, &#39;bc&#39;, &#39;bc&#39;]</span>
re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">(a?)(bc)</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">bcddabcessbbc</span><span style="color:#e6db74">&#34;</span>)
<span style="color:#75715e"># [(&#39;&#39;, &#39;bc&#39;), (&#39;a&#39;, &#39;bc&#39;), (&#39;&#39;, &#39;bc&#39;)]</span>
</code></pre></div><p><strong>re.finditer(pattern, string, flags=0)</strong></p>
<ul>
<li>返回一个迭代器，这个迭代器会生成  MatchObject 对象，不会重叠匹配。</li>
<li>re.finditer 其实是 re.findall 的迭代器版本（类似于 range 和 xrange）</li>
</ul>
<p><strong>re.sub(pattern, repl, string, count=0, flags=0)</strong></p>
<ul>
<li>用 repl 替换最左边的非重叠的匹配项，然后返回该字符串。如果没有匹配到，就返回原字符串。</li>
<li>repl 可以是字符串或者函数。
<ul>
<li>如果是字符串，任何 backslash escapes 都会被处理（<code>\n</code> 会被认为是换行，不认识的转义会忽略）。特殊情况，<code>\1</code> 会拿匹配到的第一个组来替换到 <code>\1</code> 位置（叫做 backreferences）。<code>\g&lt;2&gt;</code> 等同于 <code>\2</code>，<code>\g&lt;name&gt;</code> 使用的是命名的组 <code>(?P&lt;name&gt;...)</code>，<code>\g&lt;0&gt;</code> 使用的是整个字符串。</li>
<li>如果是函数，每次非重复匹配都会调用该函数，函数参数是匹配到的 MatchObject 对象，但会一个替换的字符串。</li>
</ul>
</li>
<li>count 表示要替换的最大次数，必须是非负值，如果是 0，所有的匹配项都被替换。</li>
<li>Empty matches for the pattern are replaced only when not adjacent to a previous match, so sub(&lsquo;x*', &lsquo;-', &lsquo;abc&rsquo;) returns &lsquo;-a-b-c-'.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># repl is string</span>
re<span style="color:#f92672">.</span>sub(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">def</span><span style="color:#e6db74">\</span><span style="color:#e6db74">s+([a-zA-Z_][a-zA-Z_0-9]*)</span><span style="color:#e6db74">\</span><span style="color:#e6db74">s*</span><span style="color:#e6db74">\</span><span style="color:#e6db74">(</span><span style="color:#e6db74">\</span><span style="color:#e6db74">s*</span><span style="color:#e6db74">\</span><span style="color:#e6db74">):</span><span style="color:#e6db74">&#39;</span>,
        <span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">static PyObject*</span><span style="color:#e6db74">\</span><span style="color:#e6db74">npy_</span><span style="color:#e6db74">\</span><span style="color:#e6db74">1(void)</span><span style="color:#e6db74">\</span><span style="color:#e6db74">n{</span><span style="color:#e6db74">&#39;</span>,
        <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">def myfunc():</span><span style="color:#e6db74">&#39;</span>)
<span style="color:#75715e">#&#39;static PyObject*\npy_myfunc(void)\n{&#39;</span>

<span style="color:#75715e"># repl is function</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">dashrepl</span>(matchobj):
    <span style="color:#66d9ef">if</span> matchobj<span style="color:#f92672">.</span>group(<span style="color:#ae81ff">0</span>) <span style="color:#f92672">==</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">-</span><span style="color:#e6db74">&#39;</span>: <span style="color:#66d9ef">return</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74"> </span><span style="color:#e6db74">&#39;</span>
    <span style="color:#66d9ef">else</span>: <span style="color:#66d9ef">return</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">-</span><span style="color:#e6db74">&#39;</span>
re<span style="color:#f92672">.</span>sub(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">-{1,2}</span><span style="color:#e6db74">&#39;</span>, dashrepl, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">pro----gram-files</span><span style="color:#e6db74">&#39;</span>)
<span style="color:#75715e">#&#39;pro--gram files&#39;</span>
re<span style="color:#f92672">.</span>sub(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">\</span><span style="color:#e6db74">sAND</span><span style="color:#e6db74">\</span><span style="color:#e6db74">s</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74"> &amp; </span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">Baked Beans And Spam</span><span style="color:#e6db74">&#39;</span>, flags<span style="color:#f92672">=</span>re<span style="color:#f92672">.</span>IGNORECASE)
<span style="color:#75715e">#&#39;Baked Beans &amp; Spam&#39;</span>
</code></pre></div><p><strong>re.subn(pattern, repl, string, count=0, flags=0)</strong></p>
<ul>
<li>与 re.sub 操作相同，只不过返回的是元祖 <code>(new_string, number_of_subs_made)</code>，新产生的字符串和替换的次数。</li>
</ul>
<p><strong>re.escape(pattern)</strong></p>
<ul>
<li>转义所有字符（除了 ASCII 字符和数字）。</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">print</span> re<span style="color:#f92672">.</span>escape(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">python.exe</span><span style="color:#e6db74">&#39;</span>)
<span style="color:#75715e"># python\.exe</span>

legal_chars <span style="color:#f92672">=</span> string<span style="color:#f92672">.</span>ascii_lowercase <span style="color:#f92672">+</span> string<span style="color:#f92672">.</span>digits <span style="color:#f92672">+</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">!#$</span><span style="color:#e6db74">%</span><span style="color:#e6db74">&amp;</span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">*+-.^_`|~:</span><span style="color:#e6db74">&#34;</span>
<span style="color:#66d9ef">print</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">[</span><span style="color:#e6db74">%s</span><span style="color:#e6db74">]+</span><span style="color:#e6db74">&#39;</span> <span style="color:#f92672">%</span> re<span style="color:#f92672">.</span>escape(legal_chars)
<span style="color:#75715e"># [abcdefghijklmnopqrstuvwxyz0123456789\!\#\$\%\&amp;\&#39;\*\+\-\.\^\_\`\|\~\:]+</span>

operators <span style="color:#f92672">=</span> [<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">+</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">-</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">*</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">/</span><span style="color:#e6db74">&#39;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">**</span><span style="color:#e6db74">&#39;</span>]
<span style="color:#66d9ef">print</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">|</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">.</span>join(map(re<span style="color:#f92672">.</span>escape, sorted(operators, reverse<span style="color:#f92672">=</span>True)))
<span style="color:#75715e"># \/|\-|\+|\*\*|\*</span>
</code></pre></div><p><strong>re.purge()</strong></p>
<ul>
<li>清除正则表达式缓存。</li>
</ul>
<p><strong>exception: re.error</strong></p>
<ul>
<li>当传递的正则表达式是非法的，或者在编译、匹配中发生错误，都会抛出此异常。</li>
</ul>
<p><strong>class: re.RegexObject</strong></p>
<ul>
<li>也就是 re.compile 产生的对象，<a href="https://docs.python.org/2/library/re.html#regular-expression-objects">re.RegexObject</a> 实例的所有方法，和上边提到的同名函数功能类似（上边的函数内部其实就是先初始化一个 <a href="https://docs.python.org/2/library/re.html#regular-expression-objects">re.RegexObject</a> 对象，然后调用它的同名方法），只是有细微的差别，这里不过多描述。</li>
</ul>
<h1 id="0x02-match-objects">0x02 Match Objects</h1>
<blockquote>
<p>这里重新写一个章节来介绍 MatchObject，因为他是上边大部分函数的返回值，MatchObject 对象内部的方法和属性还是需要着重介绍一下的。</p>
<p>MatchObject 的 bool 值总是 True，因此可以直接用来做 if 判断（因为 search()、match() 等如果没匹配到会返回 None）</p>
</blockquote>
<p><strong>expand(template)</strong></p>
<ul>
<li>template 可以通过 backreferences 来获取匹配到的值，作用类似于 re.sub() 那样。</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">a<span style="color:#f92672">=</span>re<span style="color:#f92672">.</span>search(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">a(bb)</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">cabb</span><span style="color:#e6db74">&#34;</span>)
a<span style="color:#f92672">.</span>expand(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">www.</span><span style="color:#e6db74">\</span><span style="color:#e6db74">g&lt;1&gt;.com</span><span style="color:#e6db74">&#34;</span>)
<span style="color:#75715e"># &#39;www.bb.com&#39;</span>
</code></pre></div><p><strong>group([group1, &hellip;])</strong></p>
<ul>
<li>返回一个或多个匹配到的子组。如果只有一个参数，那么返回值也是一个字符串；如果是多个参数，那么返回一个元组，每个参数代表元组中的一项；如果没有参数，group1 默认是 0，即返回整个匹配到的内容（不管 group 几是 0，对应的元组项都会返回整个匹配到的字符串）。</li>
<li>如果传递的参数是负值或者超过组的长度，则会抛出 IndexError 异常。</li>
<li>如果 pattern 中的某一个 group 没有匹配到内容，那么它对应的返回值就是 None；如果匹配到多次，那它会返回最后一次匹配到的值。</li>
<li>如果 pattern 中使用命名的组（<code>(?P&lt;name&gt;...)</code>），那么参数可以是索引也可以是字符串，如果没有找到字符串对应的组，则会抛出 IndexError 异常。</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">m <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>match(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">(</span><span style="color:#e6db74">\</span><span style="color:#e6db74">w+) (</span><span style="color:#e6db74">\</span><span style="color:#e6db74">w+)</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Isaac Newton, physicist</span><span style="color:#e6db74">&#34;</span>)
m<span style="color:#f92672">.</span>group(<span style="color:#ae81ff">0</span>)       <span style="color:#75715e"># The entire match</span>
<span style="color:#75715e"># &#39;Isaac Newton&#39;</span>
m<span style="color:#f92672">.</span>group(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>)    <span style="color:#75715e"># Multiple arguments give us a tuple.</span>
<span style="color:#75715e"># (&#39;Isaac&#39;, &#39;Newton&#39;)</span>

m <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>match(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">(?P&lt;first_name&gt;</span><span style="color:#e6db74">\</span><span style="color:#e6db74">w+) (?P&lt;last_name&gt;</span><span style="color:#e6db74">\</span><span style="color:#e6db74">w+)</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Malcolm Reynolds</span><span style="color:#e6db74">&#34;</span>)
m<span style="color:#f92672">.</span>group(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">first_name</span><span style="color:#e6db74">&#39;</span>)
<span style="color:#75715e"># &#39;Malcolm&#39;</span>
m<span style="color:#f92672">.</span>group(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">last_name</span><span style="color:#e6db74">&#39;</span>)
<span style="color:#75715e"># &#39;Reynolds&#39;</span>
</code></pre></div><p><strong>groups([default])</strong></p>
<ul>
<li>返回一个元组，元组包含所有匹配到的子组（从 1 开始到最后一个组）。</li>
<li>default 参数用于指定没有匹配到的组的默认值。</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">m <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>match(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">(</span><span style="color:#e6db74">\</span><span style="color:#e6db74">d+)</span><span style="color:#e6db74">\</span><span style="color:#e6db74">.?(</span><span style="color:#e6db74">\</span><span style="color:#e6db74">d+)?</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">24</span><span style="color:#e6db74">&#34;</span>)
m<span style="color:#f92672">.</span>groups()      <span style="color:#75715e"># Second group defaults to None.</span>
<span style="color:#75715e"># (&#39;24&#39;, None)</span>
m<span style="color:#f92672">.</span>groups(<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">0</span><span style="color:#e6db74">&#39;</span>)   <span style="color:#75715e"># Now, the second group defaults to &#39;0&#39;.</span>
<span style="color:#75715e"># (&#39;24&#39;, &#39;0&#39;)</span>
</code></pre></div><p><strong>groupdict([default])</strong></p>
<ul>
<li>返回一个字典，key 是命名组的名称，value 是匹配到的内容。非命名的组不会被返回。</li>
<li>default 参数同 groups()</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">m <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>match(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">(?P&lt;first_name&gt;</span><span style="color:#e6db74">\</span><span style="color:#e6db74">w+) (</span><span style="color:#e6db74">\</span><span style="color:#e6db74">w+)</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Malcolm Reynolds</span><span style="color:#e6db74">&#34;</span>)
m<span style="color:#f92672">.</span>groupdict()
<span style="color:#75715e"># {&#39;first_name&#39;: &#39;Malcolm&#39;}</span>
</code></pre></div><p><strong>start([group]) &amp;&amp; end([group])</strong></p>
<ul>
<li>返回与 group 参数匹配的子字符串的开始和结束的索引。默认 group 是 0，意思就是匹配的整个字符串。</li>
<li>如果匹配到的组是一个空字符串，那么 m.start(groupN) == m.end(groupN)。</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">email <span style="color:#f92672">=</span> <span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">tony@tiremove_thisger.net</span><span style="color:#e6db74">&#34;</span>
m <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>search(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">remove_this</span><span style="color:#e6db74">&#34;</span>, email)
email[:m<span style="color:#f92672">.</span>start()] <span style="color:#f92672">+</span> email[m<span style="color:#f92672">.</span>end():]
<span style="color:#75715e"># &#39;tony@tiger.net&#39;</span>
</code></pre></div><p><strong>span([group])</strong></p>
<ul>
<li>返回 2-tuple (m.start(group), m.end(group))。默认 group 为 0，即返回整个匹配到的内容。</li>
<li>注意，如果 group 没有参与匹配，则为 (-1, -1)。</li>
</ul>
<p><strong>pos</strong></p>
<ul>
<li>传递给 RegexObject 对象的 search () 或 match () 方法的 pos 值。</li>
<li>表示正则表达式匹配引擎执行的开始位置</li>
</ul>
<p><strong>endpos</strong></p>
<ul>
<li>传递给 RegexObject 对象的 search () 或 match () 方法的 endpos 值。</li>
<li>表示正则表达式匹配引擎执行的结尾位置</li>
</ul>
<p><strong>lastindex</strong></p>
<ul>
<li>最后一个捕获匹配的组的索引，如果没有匹配到组，则返回 None。</li>
<li>针对 ab 字符串，pattern（(a)b、((a)(b))、((ab))）中 lastindex == 1，pattern（(a)(b)）中 lastindex == 2</li>
</ul>
<p><strong>lastgroup</strong></p>
<ul>
<li>最后一个捕获匹配的组的名称，如果组没有名称或者根本没有匹配到组，则返回 None。</li>
</ul>
<p><strong>re</strong></p>
<ul>
<li>re 是一个 正则表达式对象，它的 match() 或 search() 方法产生 MatchObject 实例</li>
</ul>
<p><strong>string</strong></p>
<ul>
<li>传递给 match() 或 search() 的字符串。</li>
</ul>
<hr>
<p>参考：</p>
<p>📌 <a href="https://docs.python.org/2/library/re.html">Regular expression operations</a></p>

      </div>
      <footer>
        <div class="stats">
  
    <ul class="categories">
      
        
          <li><a class="article-terms-link" href="/categories/python/">Python</a></li>
        
      
    </ul>
  
  
    <ul class="tags">
      
        
          <li><a class="article-terms-link" href="/tags/python/">python</a></li>
        
          <li><a class="article-terms-link" href="/tags/2019/">2019</a></li>
        
      
    </ul>
  
</div>

      </footer>
    </div>
    
      

    
  </article>
  <div class="pagination">
    
      <a href="/blog/2019/algorithm/leetcode-5-longest-palindromic-substring/" class="button left"><span>Leetcode：#5 最长回文子串</span></a>
    
    
      <a href="/blog/2019/computer-basics/what-programmers-must-know/" class="button right"><span>程序员必须知道的常识</span></a>
    
  </div>

      </main>
      <section id="site-sidebar">
  
    <section id="recent-posts">
      <header>
        <h1>Recent Posts</h1>
      </header>
      
      <article class="mini-post">
          
        <header>
          <h2><a href="/blog/2022/python/gdb-debugging-python/">GDB 调试 Python</a></h2>
          <time class="published" datetime="2022-07-16 00:00:00 &#43;0000 UTC">July 16, 2022</time>
        </header>
      </article>
      
      <article class="mini-post">
          
        <header>
          <h2><a href="/blog/2021/go/go-runtime-memstate/">GO Runtime 内存状态</a></h2>
          <time class="published" datetime="2021-11-15 00:00:00 &#43;0000 UTC">November 15, 2021</time>
        </header>
      </article>
      
      <article class="mini-post">
          
        <header>
          <h2><a href="/blog/2021/mit/6.828-5/">【MIT 6.828】5. 用户环境</a></h2>
          <time class="published" datetime="2021-10-31 00:00:00 &#43;0000 UTC">October 31, 2021</time>
        </header>
      </article>
      
      
        <footer>
          <a href="/blog" class="button">See More</a>
        </footer>
      
    </section>
  

  
    

      <section id="categories">
        <header>
          <h1><a href="/categories">Categories</a></h1>
        </header>
        <ul>
          
          
          <li>
              <a href="/categories/algorithm/">algorithm<span class="count">10</span></a>
          
          <li>
              <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础<span class="count">9</span></a>
          
          <li>
              <a href="/categories/python/">python<span class="count">8</span></a>
          
          <li>
              <a href="/categories/%E6%9E%B6%E6%9E%84/">架构<span class="count">8</span></a>
          
          <li>
              <a href="/categories/go/">go<span class="count">3</span></a>
          
          <li>
              <a href="/categories/blog/">blog<span class="count">1</span></a>
          
          <li>
              <a href="/categories/web/">web<span class="count">1</span></a>
          
          <li>
              <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库<span class="count">1</span></a>
          
          </li>
        </ul>
      </section>
    
  

  
    <section id="mini-bio">
      <header>
        <h1>About</h1>
      </header>
      <p>Ordinary but not mediocre, fighting <i class='fab fa-angellist'></i></p>
      <footer>
        <a href="/about" class="button">Learn More</a>
      </footer>
    </section>
  
</section>

      <footer id="site-footer">
  
      <ul class="socnet-icons">
        

        <li><a href="//github.com/LoveXiaoLiu" target="_blank" rel="noopener" title="GitHub" class="fab fa-github"></a></li>























<li><a href="weixin://contacts/profile/0x00" target="_blank" rel="noopener" title="WeChat" class="fab fa-weixin"></a></li>















<li><a href="mailto:shuai.grass@gmail.com" target="_blank" title="Email" class="far fa-envelope"></a></li>

      </ul>
  
  <p class="copyright">
    © 2022 Gra55&#39;s Blog
      <br>
    Theme: <a href='https://github.com/pacollins/hugo-future-imperfect-slim' target='_blank' rel='noopener'>Hugo Future Imperfect Slim</a><br>A <a href='https://html5up.net/future-imperfect' target='_blank' rel='noopener'>HTML5 UP port</a> | Powered by <a href='https://gohugo.io/' title='0.60.0' target='_blank' rel='noopener'>Hugo</a>
  </p>
</footer>
<a id="back-to-top" href="#" class="fas fa-arrow-up fa-2x"></a>

      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/highlight.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/languages/python.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/languages/sql.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/languages/shell.min.js"></script>
    <script>hljs.highlightAll();</script><script src="//code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.js"></script>
    <script src="//unpkg.com/lunr/lunr.js"></script><script src="/js/bundlecdn.min.e63fe476a466e8f6d101ddb4dd3f27ec124c3bece64f2f5e317a05eb20e7048d.js" integrity="sha256-5j/kdqRm6PbRAd203T8n7BJMO&#43;zmTy9eMXoF6yDnBI0="></script>
    <script src="/js/add-on.js"></script>
    </div>
  </body>
</html>
